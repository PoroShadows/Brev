"use strict";var brev=function(){function a(a,b,c){var d=a.__handlers__[b];if(d)for(var e=0;e<d.length;e++)if(d[e].handler===c)return e;return-1}function b(a,b){this.max=a,this.executed=0,this.handler=b}function d(){this.__handlers__={}}var c=["__handlers__","many","once","on","off","emit","mixin","createBus","reflect"];return d.prototype.many=function(c,d,e){if("undefined"==typeof d||d<1&&isFinite(d))throw new TypeError("amount has to be defined and be higher than 0");if("function"!=typeof e)throw new TypeError("handler has to be defined and has to be a function");var f=this.__handlers__[c]=this.__handlers__[c]||[];return a(this,c,e)===-1&&f.push(new b(d,e)),this},d.prototype.once=function(a,b){return this.many(a,1,b)},d.prototype.on=function(a,b){return this.many(a,1/0,b)},d.prototype.off=function(b,c){var e,d=this.__handlers__[b];return(e=a(this,b,c))!==-1&&d.splice(e,1),this},d.prototype.emit=function(a,b){var c=this.__handlers__[a];if(c)for(var d=0;d<c.length;d++){var e=c[d];isFinite(e.max)&&++e.executed>=e.max&&this.off(a,e.handler),e.handler(b)}},d.prototype.mixin=function(a){for(var b=0;b<c.length;b++)a[c[b]]=this[c[b]]},d.prototype.createBus=function(){return new d},d.prototype.reflect=function(a){var b=this.__handlers__[a],c="undefined"!=typeof b;return{name:a,exists:c,length:c?b.length:0,handlers:c?b:[]}},new d}();